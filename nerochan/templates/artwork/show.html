{% extends 'includes/base.html' %}

{% block content %}

{% set img = url_for('main.uploaded_file', filename=artwork.image) %}
<div class="container">
    <div class="row">
		<h2 class="no-margin"><strong>{{ artwork.title }}</strong></h2>
		<h6 class="no-margin">
			posted by <a href="{{ url_for('user.show', handle=artwork.user.handle) }}">{{ artwork.user.handle }}</a> - {{ artwork.upload_date | humanize }}
		</h6>
		<p class="artworkDescription">{{ artwork.description }}</p>
	</div>
	<hr>
	<div class="row">
		<div class="column one-half">
			<a href="{{ img }}">
				<img src="{{ img }}" width="100%" style="padding-bottom: 2em;">
			</a>
		</div>
		<div class="column one-half">
			<h5>Send a Tip</h5>
			<p class="walletAddress">{{ artwork.user.wallet_address }}</p>
			<form method="post">
				{{ form.csrf_token }}
				<div class="row">
					<div class="six columns">
						{{ form.tx_id.label }}
						{{ form.tx_id }}
					</div>
					<div class="six columns">
						{{ form.tx_key.label }}
						{{ form.tx_key }}
					</div>
				</div>
				<input class="button-primary" type="submit" value="Submit">
			</form>
			{% if txes_pending %}
				<h6>{{ txes_pending }} tips pending</h6>
			{% endif %}
			{% if txes %}
				<table class="u-full-width">
					<thead>
					<tr>
						<th>TXID</th>
						<th>XMR</th>
						<th>Date</th>
					</tr>
					</thead>
					<tbody>
						{% for tx in txes %}
							<tr>
								<td><a href="{{ tx.tx_id | xmr_block_explorer }}" target="_blank">{{ tx.tx_id | shorten }}</a></td>
								<td>{{ tx.atomic_xmr | atomic }}</td>
								<td>{{ tx.tx_date | humanize }}</td>
							</tr>
						{% endfor %}
					</tbody>
				</table>
				<p>Total Received: <strong>{{ total | atomic }} XMR</strong></p>
			{% else %}
				<p>No tips confirmed yet...</p>
			{% endif %}
		</div>
	</div>
</div>


{% endblock %}
